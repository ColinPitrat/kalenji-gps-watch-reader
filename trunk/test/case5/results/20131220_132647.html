<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:v="urn:schemas-microsoft-com:vml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Session from 2013-12-20T13:26:47Z</title>
<style media='screen' type='text/css'>
.dygraph-legend {
    width: 100px;
    background-color: transparent !important;
    left: 75px !important;
    top: 5px !important;
    width: 400px !important;
    
}
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
popupGlobal = null;
highlightedPoint = null;
function lap_popup_callback(event, dataLapPoint)
{
    var popup = new google.maps.InfoWindow({position: event.latLng, content: dataLapPoint.infos});
    popup.open(map);
    return popup;
}
function point_popup_callback(event,dataPoint)
{
    var popup = new google.maps.InfoWindow({position: event.latLng, 
                                            content: "<b>Time:</b> " + dataPoint.time + "<br /><b>Elapsed:</b> " + dataPoint.duration +"<br /><b>Speed:</b> " + dataPoint.speed + " km/h<br /><b>Heartrate:</b> " + dataPoint.heartrate +" bpm<br/><b>Elevation:</b> "+ dataPoint.altitude + " m"});
    popup.open(map);
    return popup;
}
pointsList = Array(
{lat:51.217907, long:3.211408, color: "#000000", elapsed: 0, time: "2013-12-20 13:26:47.0", duration: "0s", speed: 0, heartrate: 104, altitude: 0}
,{lat:51.217887, long:3.211443, color: "#000000", elapsed: 2000, time: "2013-12-20 13:26:49.0", duration: "2s", speed: 1.63, heartrate: 101, altitude: 0}
,{lat:51.217865, long:3.211482, color: "#000000", elapsed: 4000, time: "2013-12-20 13:26:51.3", duration: "4s", speed: 2.25, heartrate: 99, altitude: 0}
,{lat:51.217838, long:3.211517, color: "#000000", elapsed: 6000, time: "2013-12-20 13:26:53.5", duration: "6s", speed: 2.96, heartrate: 98, altitude: 0}
,{lat:51.217813, long:3.211557, color: "#000000", elapsed: 8000, time: "2013-12-20 13:26:55.6", duration: "8s", speed: 3.67, heartrate: 95, altitude: 0}
,{lat:51.217765, long:3.211648, color: "#000000", elapsed: 10000, time: "2013-12-20 13:26:57.8", duration: "10s", speed: 4.61, heartrate: 92, altitude: 0}
,{lat:51.217723, long:3.21172, color: "#3e0000", elapsed: 12000, time: "2013-12-20 13:26:59.9", duration: "12s", speed: 5.74, heartrate: 91, altitude: 0}
,{lat:51.217688, long:3.211777, color: "#8b0000", elapsed: 15000, time: "2013-12-20 13:27:02.1", duration: "15s", speed: 6.66, heartrate: 92, altitude: 0}
,{lat:51.217667, long:3.211818, color: "#c80000", elapsed: 17000, time: "2013-12-20 13:27:04.2", duration: "17s", speed: 7.38, heartrate: 92, altitude: 0}
,{lat:51.217655, long:3.21185, color: "#eb0000", elapsed: 19000, time: "2013-12-20 13:27:06.4", duration: "19s", speed: 7.8, heartrate: 96, altitude: 0}
,{lat:51.21764, long:3.211887, color: "#f20000", elapsed: 21000, time: "2013-12-20 13:27:08.5", duration: "21s", speed: 7.88, heartrate: 97, altitude: 0}
,{lat:51.217622, long:3.211908, color: "#d30000", elapsed: 23000, time: "2013-12-20 13:27:10.6", duration: "23s", speed: 7.51, heartrate: 97, altitude: 0}
,{lat:51.21758, long:3.211948, color: "#b90000", elapsed: 25000, time: "2013-12-20 13:27:12.8", duration: "25s", speed: 7.2, heartrate: 98, altitude: 0}
,{lat:51.217552, long:3.211963, color: "#9e0000", elapsed: 28000, time: "2013-12-20 13:27:15.0", duration: "28s", speed: 6.88, heartrate: 99, altitude: 0}
,{lat:51.217528, long:3.211987, color: "#7f0000", elapsed: 30000, time: "2013-12-20 13:27:17.1", duration: "30s", speed: 6.51, heartrate: 99, altitude: 0}
,{lat:51.217508, long:3.21201, color: "#730000", elapsed: 32000, time: "2013-12-20 13:27:19.3", duration: "32s", speed: 6.37, heartrate: 99, altitude: 0}
,{lat:51.217485, long:3.212032, color: "#5f0000", elapsed: 34000, time: "2013-12-20 13:27:21.4", duration: "34s", speed: 6.13, heartrate: 98, altitude: 0}
,{lat:51.217462, long:3.21205, color: "#540000", elapsed: 36000, time: "2013-12-20 13:27:23.6", duration: "36s", speed: 6, heartrate: 99, altitude: 0}
,{lat:51.217437, long:3.212075, color: "#3f0000", elapsed: 38000, time: "2013-12-20 13:27:25.7", duration: "38s", speed: 5.75, heartrate: 99, altitude: 0}
,{lat:51.217398, long:3.212118, color: "#3a0000", elapsed: 40000, time: "2013-12-20 13:27:27.8", duration: "40s", speed: 5.7, heartrate: 97, altitude: 0}
,{lat:51.217377, long:3.212148, color: "#430000", elapsed: 43000, time: "2013-12-20 13:27:30.0", duration: "43s", speed: 5.8, heartrate: 96, altitude: 0}
,{lat:51.217353, long:3.212188, color: "#450000", elapsed: 45000, time: "2013-12-20 13:27:32.1", duration: "45s", speed: 5.82, heartrate: 95, altitude: 0}
,{lat:51.217328, long:3.21222, color: "#470000", elapsed: 47000, time: "2013-12-20 13:27:34.3", duration: "47s", speed: 5.85, heartrate: 95, altitude: 0}
,{lat:51.217302, long:3.212245, color: "#4d0000", elapsed: 49000, time: "2013-12-20 13:27:36.4", duration: "49s", speed: 5.92, heartrate: 95, altitude: 0}
,{lat:51.217272, long:3.21228, color: "#570000", elapsed: 51000, time: "2013-12-20 13:27:38.6", duration: "51s", speed: 6.04, heartrate: 95, altitude: 0}
,{lat:51.217252, long:3.212317, color: "#5b0000", elapsed: 53000, time: "2013-12-20 13:27:40.7", duration: "53s", speed: 6.09, heartrate: 95, altitude: 0}
,{lat:51.217223, long:3.212368, color: "#610000", elapsed: 55000, time: "2013-12-20 13:27:42.9", duration: "55s", speed: 6.16, heartrate: 95, altitude: 0}
,{lat:51.217193, long:3.212405, color: "#6f0000", elapsed: 58000, time: "2013-12-20 13:27:45.0", duration: "58s", speed: 6.33, heartrate: 94, altitude: 0}
,{lat:51.217173, long:3.212442, color: "#740000", elapsed: 60000, time: "2013-12-20 13:27:47.1", duration: "1m0s", speed: 6.39, heartrate: 94, altitude: 0}
,{lat:51.217155, long:3.21247, color: "#750000", elapsed: 62000, time: "2013-12-20 13:27:49.3", duration: "1m2s", speed: 6.4, heartrate: 96, altitude: 0}
,{lat:51.217132, long:3.212508, color: "#6f0000", elapsed: 64000, time: "2013-12-20 13:27:51.4", duration: "1m4s", speed: 6.33, heartrate: 97, altitude: 0}
,{lat:51.217108, long:3.212542, color: "#6c0000", elapsed: 66000, time: "2013-12-20 13:27:53.6", duration: "1m6s", speed: 6.29, heartrate: 96, altitude: 0}
,{lat:51.217085, long:3.212568, color: "#610000", elapsed: 68000, time: "2013-12-20 13:27:55.7", duration: "1m8s", speed: 6.16, heartrate: 95, altitude: 0}
,{lat:51.21705, long:3.212623, color: "#600000", elapsed: 70000, time: "2013-12-20 13:27:57.9", duration: "1m10s", speed: 6.15, heartrate: 94, altitude: 0}
,{lat:51.217032, long:3.21267, color: "#6d0000", elapsed: 73000, time: "2013-12-20 13:28:00.0", duration: "1m13s", speed: 6.3, heartrate: 94, altitude: 0}
,{lat:51.217008, long:3.212698, color: "#6e0000", elapsed: 75000, time: "2013-12-20 13:28:02.1", duration: "1m15s", speed: 6.31, heartrate: 93, altitude: 0}
,{lat:51.216983, long:3.212735, color: "#6f0000", elapsed: 77000, time: "2013-12-20 13:28:04.3", duration: "1m17s", speed: 6.32, heartrate: 93, altitude: 0}
,{lat:51.216962, long:3.212767, color: "#6f0000", elapsed: 79000, time: "2013-12-20 13:28:06.4", duration: "1m19s", speed: 6.32, heartrate: 93, altitude: 0}
,{lat:51.216935, long:3.212803, color: "#6c0000", elapsed: 81000, time: "2013-12-20 13:28:08.6", duration: "1m21s", speed: 6.29, heartrate: 93, altitude: 0}
,{lat:51.216913, long:3.212837, color: "#6c0000", elapsed: 83000, time: "2013-12-20 13:28:10.7", duration: "1m23s", speed: 6.29, heartrate: 92, altitude: 0}
,{lat:51.216878, long:3.21288, color: "#6d0000", elapsed: 85000, time: "2013-12-20 13:28:12.9", duration: "1m25s", speed: 6.3, heartrate: 93, altitude: 0}
,{lat:51.216858, long:3.212902, color: "#6f0000", elapsed: 88000, time: "2013-12-20 13:28:15.0", duration: "1m28s", speed: 6.32, heartrate: 94, altitude: 0}
,{lat:51.216833, long:3.212927, color: "#670000", elapsed: 90000, time: "2013-12-20 13:28:17.1", duration: "1m30s", speed: 6.23, heartrate: 94, altitude: 0}
,{lat:51.216807, long:3.212952, color: "#600000", elapsed: 92000, time: "2013-12-20 13:28:19.3", duration: "1m32s", speed: 6.15, heartrate: 93, altitude: 0}
,{lat:51.216775, long:3.212967, color: "#5c0000", elapsed: 94000, time: "2013-12-20 13:28:21.4", duration: "1m34s", speed: 6.1, heartrate: 93, altitude: 0}
,{lat:51.216752, long:3.213007, color: "#540000", elapsed: 96000, time: "2013-12-20 13:28:23.6", duration: "1m36s", speed: 6, heartrate: 93, altitude: 0}
,{lat:51.216735, long:3.213035, color: "#460000", elapsed: 98000, time: "2013-12-20 13:28:25.7", duration: "1m38s", speed: 5.84, heartrate: 93, altitude: 0}
,{lat:51.216705, long:3.213078, color: "#4f0000", elapsed: 100000, time: "2013-12-20 13:28:27.8", duration: "1m40s", speed: 5.94, heartrate: 93, altitude: 0}
,{lat:51.21633, long:3.213833, color: "#420000", elapsed: 103000, time: "2013-12-20 13:28:30.0", duration: "1m43s", speed: 5.79, heartrate: 90, altitude: 0}
,{lat:51.21631, long:3.213873, color: "#450000", elapsed: 105000, time: "2013-12-20 13:28:32.6", duration: "1m45s", speed: 5.83, heartrate: 90, altitude: 0}
,{lat:51.216297, long:3.21391, color: "#450000", elapsed: 107000, time: "2013-12-20 13:28:34.8", duration: "1m47s", speed: 5.82, heartrate: 90, altitude: 0}
,{lat:51.216278, long:3.21394, color: "#410000", elapsed: 109000, time: "2013-12-20 13:28:36.9", duration: "1m49s", speed: 5.78, heartrate: 89, altitude: 0}
,{lat:51.216248, long:3.21399, color: "#4a0000", elapsed: 112000, time: "2013-12-20 13:28:39.1", duration: "1m52s", speed: 5.88, heartrate: 90, altitude: 0}
,{lat:51.216232, long:3.214022, color: "#480000", elapsed: 114000, time: "2013-12-20 13:28:41.2", duration: "1m54s", speed: 5.86, heartrate: 91, altitude: 0}
,{lat:51.216215, long:3.214048, color: "#3f0000", elapsed: 116000, time: "2013-12-20 13:28:43.5", duration: "1m56s", speed: 5.75, heartrate: 91, altitude: 0}
,{lat:51.216203, long:3.214077, color: "#300000", elapsed: 118000, time: "2013-12-20 13:28:45.6", duration: "1m58s", speed: 5.58, heartrate: 91, altitude: 0}
,{lat:51.216193, long:3.214108, color: "#230000", elapsed: 120000, time: "2013-12-20 13:28:47.8", duration: "2m0s", speed: 5.42, heartrate: 92, altitude: 0}
,{lat:51.216178, long:3.214148, color: "#150000", elapsed: 122000, time: "2013-12-20 13:28:49.9", duration: "2m2s", speed: 5.25, heartrate: 92, altitude: 0}
,{lat:51.216152, long:3.2142, color: "#0f0000", elapsed: 125000, time: "2013-12-20 13:28:52.0", duration: "2m5s", speed: 5.19, heartrate: 92, altitude: 0}
,{lat:51.21613, long:3.214245, color: "#1c0000", elapsed: 127000, time: "2013-12-20 13:28:54.2", duration: "2m7s", speed: 5.34, heartrate: 92, altitude: 0}
,{lat:51.216108, long:3.214292, color: "#250000", elapsed: 129000, time: "2013-12-20 13:28:56.3", duration: "2m9s", speed: 5.45, heartrate: 93, altitude: 0}
,{lat:51.216083, long:3.21434, color: "#390000", elapsed: 131000, time: "2013-12-20 13:28:58.5", duration: "2m11s", speed: 5.68, heartrate: 93, altitude: 0}
,{lat:51.21606, long:3.214397, color: "#540000", elapsed: 133000, time: "2013-12-20 13:29:00.6", duration: "2m13s", speed: 6.01, heartrate: 93, altitude: 0}
,{lat:51.216035, long:3.214453, color: "#6e0000", elapsed: 135000, time: "2013-12-20 13:29:02.8", duration: "2m15s", speed: 6.31, heartrate: 93, altitude: 0}
,{lat:51.216008, long:3.214512, color: "#8a0000", elapsed: 137000, time: "2013-12-20 13:29:04.9", duration: "2m17s", speed: 6.64, heartrate: 93, altitude: 0}
,{lat:51.215975, long:3.214582, color: "#b60000", elapsed: 140000, time: "2013-12-20 13:29:07.1", duration: "2m20s", speed: 7.17, heartrate: 94, altitude: 0}
,{lat:51.215953, long:3.214628, color: "#dd0000", elapsed: 142000, time: "2013-12-20 13:29:09.2", duration: "2m22s", speed: 7.63, heartrate: 95, altitude: 0}
,{lat:51.215935, long:3.214675, color: "#e40000", elapsed: 144000, time: "2013-12-20 13:29:11.3", duration: "2m24s", speed: 7.72, heartrate: 95, altitude: 0}
,{lat:51.215917, long:3.214717, color: "#e10000", elapsed: 146000, time: "2013-12-20 13:29:13.5", duration: "2m26s", speed: 7.68, heartrate: 95, altitude: 0}
,{lat:51.215902, long:3.214748, color: "#d10000", elapsed: 148000, time: "2013-12-20 13:29:15.6", duration: "2m28s", speed: 7.49, heartrate: 95, altitude: 0}
,{lat:51.215888, long:3.214783, color: "#b00000", elapsed: 150000, time: "2013-12-20 13:29:17.8", duration: "2m30s", speed: 7.1, heartrate: 95, altitude: 0}
,{lat:51.21587, long:3.21482, color: "#8d0000", elapsed: 152000, time: "2013-12-20 13:29:19.9", duration: "2m32s", speed: 6.68, heartrate: 94, altitude: 0}
,{lat:51.215835, long:3.214877, color: "#840000", elapsed: 155000, time: "2013-12-20 13:29:22.1", duration: "2m35s", speed: 6.57, heartrate: 93, altitude: 0}
,{lat:51.215815, long:3.214917, color: "#750000", elapsed: 157000, time: "2013-12-20 13:29:24.2", duration: "2m37s", speed: 6.4, heartrate: 92, altitude: 0}
,{lat:51.215795, long:3.214948, color: "#6a0000", elapsed: 159000, time: "2013-12-20 13:29:26.4", duration: "2m39s", speed: 6.26, heartrate: 92, altitude: 0}
,{lat:51.215775, long:3.214982, color: "#660000", elapsed: 161000, time: "2013-12-20 13:29:28.5", duration: "2m41s", speed: 6.22, heartrate: 92, altitude: 0}
,{lat:51.21576, long:3.215012, color: "#5f0000", elapsed: 163000, time: "2013-12-20 13:29:30.7", duration: "2m43s", speed: 6.13, heartrate: 92, altitude: 0}
,{lat:51.215742, long:3.21504, color: "#580000", elapsed: 165000, time: "2013-12-20 13:29:32.8", duration: "2m45s", speed: 6.05, heartrate: 91, altitude: 0}
,{lat:51.215718, long:3.2151, color: "#4e0000", elapsed: 167000, time: "2013-12-20 13:29:34.9", duration: "2m47s", speed: 5.93, heartrate: 91, altitude: 0}
,{lat:51.21571, long:3.215135, color: "#4d0000", elapsed: 170000, time: "2013-12-20 13:29:37.1", duration: "2m50s", speed: 5.92, heartrate: 91, altitude: 0}
,{lat:51.215695, long:3.215178, color: "#410000", elapsed: 172000, time: "2013-12-20 13:29:39.3", duration: "2m52s", speed: 5.78, heartrate: 91, altitude: 0}
,{lat:51.215683, long:3.215218, color: "#3a0000", elapsed: 174000, time: "2013-12-20 13:29:41.4", duration: "2m54s", speed: 5.7, heartrate: 90, altitude: 0}
,{lat:51.215675, long:3.215263, color: "#390000", elapsed: 176000, time: "2013-12-20 13:29:43.6", duration: "2m56s", speed: 5.68, heartrate: 90, altitude: 0}
,{lat:51.215667, long:3.21531, color: "#340000", elapsed: 178000, time: "2013-12-20 13:29:45.7", duration: "2m58s", speed: 5.62, heartrate: 91, altitude: 0}
,{lat:51.215657, long:3.215362, color: "#2f0000", elapsed: 180000, time: "2013-12-20 13:29:47.9", duration: "3m0s", speed: 5.56, heartrate: 92, altitude: 0}
,{lat:51.215645, long:3.215435, color: "#450000", elapsed: 183000, time: "2013-12-20 13:29:50.0", duration: "3m3s", speed: 5.82, heartrate: 93, altitude: 0}
,{lat:51.215628, long:3.215475, color: "#5b0000", elapsed: 185000, time: "2013-12-20 13:29:52.2", duration: "3m5s", speed: 6.09, heartrate: 94, altitude: 0}
,{lat:51.215613, long:3.21551, color: "#5c0000", elapsed: 187000, time: "2013-12-20 13:29:54.3", duration: "3m7s", speed: 6.1, heartrate: 94, altitude: 0}
,{lat:51.215598, long:3.215545, color: "#5b0000", elapsed: 189000, time: "2013-12-20 13:29:56.5", duration: "3m9s", speed: 6.09, heartrate: 94, altitude: 0}
,{lat:51.21559, long:3.215578, color: "#5a0000", elapsed: 191000, time: "2013-12-20 13:29:58.6", duration: "3m11s", speed: 6.08, heartrate: 95, altitude: 0}
,{lat:51.215583, long:3.215598, color: "#4b0000", elapsed: 193000, time: "2013-12-20 13:30:00.8", duration: "3m13s", speed: 5.9, heartrate: 95, altitude: 0}
,{lat:51.215582, long:3.215608, color: "#000000", elapsed: 195000, time: "2013-12-20 13:30:02.9", duration: "3m15s", speed: 0, heartrate: 94, altitude: 0}
,{lat:51.215585, long:3.215637, color: "#060000", elapsed: 198000, time: "2013-12-20 13:30:05.1", duration: "3m18s", speed: 5.08, heartrate: 94, altitude: 0}
,{lat:51.215565, long:3.215678, color: "#000000", elapsed: 200000, time: "2013-12-20 13:30:07.3", duration: "3m20s", speed: 4.7, heartrate: 94, altitude: 0}
,{lat:51.215532, long:3.215723, color: "#000000", elapsed: 202000, time: "2013-12-20 13:30:09.4", duration: "3m22s", speed: 4.59, heartrate: 95, altitude: 0}
,{lat:51.215505, long:3.215767, color: "#000000", elapsed: 204000, time: "2013-12-20 13:30:11.6", duration: "3m24s", speed: 4.67, heartrate: 95, altitude: 0}
,{lat:51.215478, long:3.21581, color: "#000000", elapsed: 206000, time: "2013-12-20 13:30:13.7", duration: "3m26s", speed: 4.94, heartrate: 95, altitude: 0}
,{lat:51.215452, long:3.215847, color: "#1f0000", elapsed: 208000, time: "2013-12-20 13:30:15.9", duration: "3m28s", speed: 5.37, heartrate: 94, altitude: 0}
,{lat:51.215417, long:3.215905, color: "#570000", elapsed: 211000, time: "2013-12-20 13:30:18.0", duration: "3m31s", speed: 6.04, heartrate: 94, altitude: 0}
,{lat:51.215388, long:3.21595, color: "#880000", elapsed: 213000, time: "2013-12-20 13:30:20.2", duration: "3m33s", speed: 6.62, heartrate: 92, altitude: 0}
,{lat:51.215355, long:3.215983, color: "#990000", elapsed: 215000, time: "2013-12-20 13:30:22.3", duration: "3m35s", speed: 6.82, heartrate: 91, altitude: 0}
,{lat:51.215325, long:3.216015, color: "#a50000", elapsed: 217000, time: "2013-12-20 13:30:24.5", duration: "3m37s", speed: 6.97, heartrate: 91, altitude: 0}
,{lat:51.215303, long:3.216043, color: "#a80000", elapsed: 219000, time: "2013-12-20 13:30:26.6", duration: "3m39s", speed: 7, heartrate: 91, altitude: 0}
,{lat:51.21528, long:3.216062, color: "#9c0000", elapsed: 221000, time: "2013-12-20 13:30:28.8", duration: "3m41s", speed: 6.86, heartrate: 90, altitude: 0}
,{lat:51.213998, long:3.217385, color: "#000000", elapsed: 223000, time: "2013-12-20 13:30:30.9", duration: "3m43s", speed: 4.69, heartrate: 89, altitude: 10}
,{lat:51.213982, long:3.217383, color: "#000000", elapsed: 225000, time: "2013-12-20 13:30:32.9", duration: "3m45s", speed: 4.51, heartrate: 89, altitude: 11}
,{lat:51.213972, long:3.217385, color: "#000000", elapsed: 228000, time: "2013-12-20 13:30:35.0", duration: "3m48s", speed: 0, heartrate: 89, altitude: 12}
,{lat:51.213955, long:3.217417, color: "#000000", elapsed: 230000, time: "2013-12-20 13:30:37.2", duration: "3m50s", speed: 4.25, heartrate: 89, altitude: 12}
,{lat:51.213942, long:3.217437, color: "#000000", elapsed: 232000, time: "2013-12-20 13:30:39.3", duration: "3m52s", speed: 4.13, heartrate: 90, altitude: 13}
,{lat:51.21392, long:3.217458, color: "#000000", elapsed: 234000, time: "2013-12-20 13:30:41.5", duration: "3m54s", speed: 4.05, heartrate: 91, altitude: 13}
,{lat:51.213902, long:3.217487, color: "#000000", elapsed: 236000, time: "2013-12-20 13:30:43.7", duration: "3m56s", speed: 4.04, heartrate: 91, altitude: 13}
,{lat:51.213882, long:3.217523, color: "#000000", elapsed: 238000, time: "2013-12-20 13:30:45.8", duration: "3m58s", speed: 4.07, heartrate: 91, altitude: 13}
,{lat:51.213867, long:3.217558, color: "#000000", elapsed: 240000, time: "2013-12-20 13:30:47.9", duration: "4m0s", speed: 4.22, heartrate: 91, altitude: 13}
,{lat:51.213847, long:3.217605, color: "#000000", elapsed: 243000, time: "2013-12-20 13:30:50.1", duration: "4m3s", speed: 4.41, heartrate: 92, altitude: 13}
,{lat:51.213827, long:3.21765, color: "#000000", elapsed: 245000, time: "2013-12-20 13:30:52.2", duration: "4m5s", speed: 4.69, heartrate: 93, altitude: 13}
,{lat:51.213798, long:3.217693, color: "#010000", elapsed: 247000, time: "2013-12-20 13:30:54.4", duration: "4m7s", speed: 5.02, heartrate: 95, altitude: 13}
,{lat:51.213753, long:3.217755, color: "#370000", elapsed: 249000, time: "2013-12-20 13:30:56.5", duration: "4m9s", speed: 5.66, heartrate: 96, altitude: 13}
,{lat:51.213725, long:3.217788, color: "#6a0000", elapsed: 251000, time: "2013-12-20 13:30:58.7", duration: "4m11s", speed: 6.27, heartrate: 95, altitude: 13}
,{lat:51.213708, long:3.217792, color: "#7a0000", elapsed: 253000, time: "2013-12-20 13:31:00.9", duration: "4m13s", speed: 6.45, heartrate: 93, altitude: 13}
,{lat:51.213687, long:3.21782, color: "#7a0000", elapsed: 256000, time: "2013-12-20 13:31:03.0", duration: "4m16s", speed: 6.46, heartrate: 92, altitude: 13}
,{lat:51.213658, long:3.217852, color: "#7c0000", elapsed: 258000, time: "2013-12-20 13:31:05.2", duration: "4m18s", speed: 6.48, heartrate: 92, altitude: 13}
,{lat:51.213635, long:3.217868, color: "#740000", elapsed: 260000, time: "2013-12-20 13:31:07.3", duration: "4m20s", speed: 6.39, heartrate: 91, altitude: 13}
,{lat:51.21359, long:3.217902, color: "#680000", elapsed: 262000, time: "2013-12-20 13:31:09.5", duration: "4m22s", speed: 6.24, heartrate: 91, altitude: 13}
,{lat:51.213563, long:3.217935, color: "#5d0000", elapsed: 264000, time: "2013-12-20 13:31:11.6", duration: "4m24s", speed: 6.11, heartrate: 91, altitude: 13}
,{lat:51.213533, long:3.217955, color: "#5f0000", elapsed: 266000, time: "2013-12-20 13:31:13.8", duration: "4m26s", speed: 6.14, heartrate: 90, altitude: 13}
,{lat:51.21351, long:3.217983, color: "#640000", elapsed: 268000, time: "2013-12-20 13:31:15.9", duration: "4m28s", speed: 6.2, heartrate: 90, altitude: 13}
,{lat:51.21349, long:3.218015, color: "#660000", elapsed: 271000, time: "2013-12-20 13:31:18.1", duration: "4m31s", speed: 6.22, heartrate: 89, altitude: 13}
,{lat:51.21347, long:3.218047, color: "#5f0000", elapsed: 273000, time: "2013-12-20 13:31:20.2", duration: "4m33s", speed: 6.14, heartrate: 89, altitude: 13}
,{lat:51.21345, long:3.218068, color: "#4e0000", elapsed: 275000, time: "2013-12-20 13:31:22.4", duration: "4m35s", speed: 5.93, heartrate: 89, altitude: 13}
,{lat:51.213425, long:3.218098, color: "#440000", elapsed: 277000, time: "2013-12-20 13:31:24.5", duration: "4m37s", speed: 5.81, heartrate: 89, altitude: 12}
,{lat:51.213402, long:3.218128, color: "#410000", elapsed: 279000, time: "2013-12-20 13:31:26.7", duration: "4m39s", speed: 5.78, heartrate: 88, altitude: 11}
,{lat:51.213378, long:3.218152, color: "#350000", elapsed: 281000, time: "2013-12-20 13:31:28.8", duration: "4m41s", speed: 5.63, heartrate: 89, altitude: 9}
,{lat:51.213355, long:3.218183, color: "#2c0000", elapsed: 284000, time: "2013-12-20 13:31:31.0", duration: "4m44s", speed: 5.53, heartrate: 89, altitude: 8}
,{lat:51.213338, long:3.218225, color: "#290000", elapsed: 286000, time: "2013-12-20 13:31:33.1", duration: "4m46s", speed: 5.49, heartrate: 89, altitude: 8}
,{lat:51.21332, long:3.218278, color: "#2f0000", elapsed: 288000, time: "2013-12-20 13:31:35.3", duration: "4m48s", speed: 5.56, heartrate: 90, altitude: 8}
,{lat:51.213285, long:3.218352, color: "#4a0000", elapsed: 290000, time: "2013-12-20 13:31:37.4", duration: "4m50s", speed: 5.89, heartrate: 90, altitude: 8}
,{lat:51.213262, long:3.218392, color: "#670000", elapsed: 292000, time: "2013-12-20 13:31:39.6", duration: "4m52s", speed: 6.23, heartrate: 90, altitude: 8}
,{lat:51.213243, long:3.218417, color: "#740000", elapsed: 294000, time: "2013-12-20 13:31:41.8", duration: "4m54s", speed: 6.38, heartrate: 90, altitude: 8}
,{lat:51.213222, long:3.218438, color: "#7a0000", elapsed: 296000, time: "2013-12-20 13:31:43.9", duration: "4m56s", speed: 6.45, heartrate: 91, altitude: 7}
,{lat:51.213198, long:3.218458, color: "#760000", elapsed: 299000, time: "2013-12-20 13:31:46.1", duration: "4m59s", speed: 6.41, heartrate: 91, altitude: 7}
,{lat:51.213175, long:3.218475, color: "#600000", elapsed: 301000, time: "2013-12-20 13:31:48.3", duration: "5m1s", speed: 6.15, heartrate: 92, altitude: 6}
,{lat:51.213138, long:3.218508, color: "#4f0000", elapsed: 303000, time: "2013-12-20 13:31:50.5", duration: "5m3s", speed: 5.95, heartrate: 92, altitude: 5}
,{lat:51.213113, long:3.218523, color: "#460000", elapsed: 305000, time: "2013-12-20 13:31:52.7", duration: "5m5s", speed: 5.84, heartrate: 92, altitude: 5}
,{lat:51.213088, long:3.218542, color: "#3a0000", elapsed: 307000, time: "2013-12-20 13:31:54.8", duration: "5m7s", speed: 5.7, heartrate: 93, altitude: 5}
,{lat:51.213063, long:3.218568, color: "#350000", elapsed: 309000, time: "2013-12-20 13:31:56.9", duration: "5m9s", speed: 5.64, heartrate: 94, altitude: 5}
,{lat:51.213042, long:3.218597, color: "#330000", elapsed: 312000, time: "2013-12-20 13:31:59.1", duration: "5m12s", speed: 5.61, heartrate: 93, altitude: 5}
,{lat:51.213018, long:3.21862, color: "#330000", elapsed: 314000, time: "2013-12-20 13:32:01.2", duration: "5m14s", speed: 5.61, heartrate: 93, altitude: 5}
,{lat:51.212997, long:3.218628, color: "#250000", elapsed: 316000, time: "2013-12-20 13:32:03.4", duration: "5m16s", speed: 5.45, heartrate: 92, altitude: 5}
,{lat:51.212977, long:3.218663, color: "#220000", elapsed: 318000, time: "2013-12-20 13:32:05.5", duration: "5m18s", speed: 5.41, heartrate: 91, altitude: 5}
,{lat:51.212955, long:3.218697, color: "#250000", elapsed: 320000, time: "2013-12-20 13:32:07.7", duration: "5m20s", speed: 5.44, heartrate: 90, altitude: 5}
,{lat:51.212933, long:3.21872, color: "#1b0000", elapsed: 322000, time: "2013-12-20 13:32:09.9", duration: "5m22s", speed: 5.33, heartrate: 90, altitude: 5}
,{lat:51.212907, long:3.218748, color: "#140000", elapsed: 325000, time: "2013-12-20 13:32:12.0", duration: "5m25s", speed: 5.24, heartrate: 90, altitude: 5}
,{lat:51.212882, long:3.218795, color: "#190000", elapsed: 327000, time: "2013-12-20 13:32:14.2", duration: "5m27s", speed: 5.3, heartrate: 90, altitude: 5}
,{lat:51.212862, long:3.21884, color: "#240000", elapsed: 329000, time: "2013-12-20 13:32:16.3", duration: "5m29s", speed: 5.43, heartrate: 90, altitude: 5}
,{lat:51.212835, long:3.21889, color: "#390000", elapsed: 331000, time: "2013-12-20 13:32:18.5", duration: "5m31s", speed: 5.68, heartrate: 90, altitude: 5}
,{lat:51.212812, long:3.21892, color: "#4d0000", elapsed: 333000, time: "2013-12-20 13:32:20.6", duration: "5m33s", speed: 5.92, heartrate: 91, altitude: 5}
,{lat:51.212783, long:3.218947, color: "#5a0000", elapsed: 335000, time: "2013-12-20 13:32:22.8", duration: "5m35s", speed: 6.08, heartrate: 91, altitude: 5}
,{lat:51.212757, long:3.218967, color: "#610000", elapsed: 337000, time: "2013-12-20 13:32:24.9", duration: "5m37s", speed: 6.16, heartrate: 91, altitude: 5}
,{lat:51.212728, long:3.219, color: "#640000", elapsed: 340000, time: "2013-12-20 13:32:27.1", duration: "5m40s", speed: 6.19, heartrate: 91, altitude: 5}
,{lat:51.212708, long:3.219035, color: "#5f0000", elapsed: 342000, time: "2013-12-20 13:32:29.2", duration: "5m42s", speed: 6.13, heartrate: 91, altitude: 5}
,{lat:51.21269, long:3.219068, color: "#540000", elapsed: 344000, time: "2013-12-20 13:32:31.4", duration: "5m44s", speed: 6.01, heartrate: 91, altitude: 5}
,{lat:51.212648, long:3.219102, color: "#620000", elapsed: 346000, time: "2013-12-20 13:32:33.5", duration: "5m46s", speed: 6.17, heartrate: 90, altitude: 5}
,{lat:51.212617, long:3.219145, color: "#750000", elapsed: 348000, time: "2013-12-20 13:32:35.7", duration: "5m48s", speed: 6.4, heartrate: 90, altitude: 5}
,{lat:51.212597, long:3.219187, color: "#7c0000", elapsed: 350000, time: "2013-12-20 13:32:37.9", duration: "5m50s", speed: 6.48, heartrate: 91, altitude: 5}
,{lat:51.212573, long:3.219208, color: "#7b0000", elapsed: 353000, time: "2013-12-20 13:32:40.0", duration: "5m53s", speed: 6.47, heartrate: 91, altitude: 5}
,{lat:51.212548, long:3.219235, color: "#790000", elapsed: 355000, time: "2013-12-20 13:32:42.2", duration: "5m55s", speed: 6.44, heartrate: 92, altitude: 6}
,{lat:51.212533, long:3.21928, color: "#790000", elapsed: 357000, time: "2013-12-20 13:32:44.3", duration: "5m57s", speed: 6.44, heartrate: 93, altitude: 8}
,{lat:51.212498, long:3.219328, color: "#7e0000", elapsed: 359000, time: "2013-12-20 13:32:46.5", duration: "5m59s", speed: 6.5, heartrate: 94, altitude: 10}
,{lat:51.212473, long:3.219357, color: "#7c0000", elapsed: 361000, time: "2013-12-20 13:32:48.6", duration: "6m1s", speed: 6.48, heartrate: 94, altitude: 11}
,{lat:51.212448, long:3.21939, color: "#6f0000", elapsed: 363000, time: "2013-12-20 13:32:50.8", duration: "6m3s", speed: 6.33, heartrate: 94, altitude: 11}
,{lat:51.21242, long:3.219423, color: "#6f0000", elapsed: 365000, time: "2013-12-20 13:32:52.9", duration: "6m5s", speed: 6.32, heartrate: 93, altitude: 11}
,{lat:51.212397, long:3.219445, color: "#6f0000", elapsed: 368000, time: "2013-12-20 13:32:55.1", duration: "6m8s", speed: 6.33, heartrate: 92, altitude: 11}
,{lat:51.21237, long:3.219465, color: "#660000", elapsed: 370000, time: "2013-12-20 13:32:57.2", duration: "6m10s", speed: 6.22, heartrate: 93, altitude: 11}
,{lat:51.21235, long:3.219488, color: "#550000", elapsed: 372000, time: "2013-12-20 13:32:59.4", duration: "6m12s", speed: 6.02, heartrate: 93, altitude: 11}
,{lat:51.21231, long:3.219527, color: "#5c0000", elapsed: 374000, time: "2013-12-20 13:33:01.5", duration: "6m14s", speed: 6.1, heartrate: 92, altitude: 11}
,{lat:51.212288, long:3.21956, color: "#630000", elapsed: 376000, time: "2013-12-20 13:33:03.7", duration: "6m16s", speed: 6.18, heartrate: 90, altitude: 11}
,{lat:51.212268, long:3.219593, color: "#5a0000", elapsed: 378000, time: "2013-12-20 13:33:05.8", duration: "6m18s", speed: 6.07, heartrate: 90, altitude: 11}
,{lat:51.212248, long:3.219598, color: "#500000", elapsed: 381000, time: "2013-12-20 13:33:08.0", duration: "6m21s", speed: 5.96, heartrate: 90, altitude: 11}
,{lat:51.21222, long:3.219598, color: "#460000", elapsed: 383000, time: "2013-12-20 13:33:10.1", duration: "6m23s", speed: 5.84, heartrate: 91, altitude: 11}
,{lat:51.212187, long:3.219633, color: "#400000", elapsed: 385000, time: "2013-12-20 13:33:12.3", duration: "6m25s", speed: 5.77, heartrate: 92, altitude: 11}
,{lat:51.212145, long:3.21968, color: "#490000", elapsed: 387000, time: "2013-12-20 13:33:14.4", duration: "6m27s", speed: 5.87, heartrate: 93, altitude: 11}
,{lat:51.212122, long:3.219712, color: "#540000", elapsed: 389000, time: "2013-12-20 13:33:16.6", duration: "6m29s", speed: 6.01, heartrate: 92, altitude: 11}
,{lat:51.212102, long:3.21973, color: "#530000", elapsed: 391000, time: "2013-12-20 13:33:18.8", duration: "6m31s", speed: 5.99, heartrate: 93, altitude: 11}
,{lat:51.212083, long:3.21975, color: "#510000", elapsed: 393000, time: "2013-12-20 13:33:20.9", duration: "6m33s", speed: 5.97, heartrate: 93, altitude: 11}
,{lat:51.212062, long:3.219767, color: "#4f0000", elapsed: 396000, time: "2013-12-20 13:33:23.1", duration: "6m36s", speed: 5.95, heartrate: 92, altitude: 11}
,{lat:51.212043, long:3.219783, color: "#4a0000", elapsed: 398000, time: "2013-12-20 13:33:25.2", duration: "6m38s", speed: 5.89, heartrate: 92, altitude: 11}
,{lat:51.21202, long:3.219798, color: "#3e0000", elapsed: 400000, time: "2013-12-20 13:33:27.4", duration: "6m40s", speed: 5.74, heartrate: 89, altitude: 11}
,{lat:51.211992, long:3.219843, color: "#2c0000", elapsed: 402000, time: "2013-12-20 13:33:29.5", duration: "6m42s", speed: 5.53, heartrate: 88, altitude: 11}
,{lat:51.211975, long:3.219862, color: "#1a0000", elapsed: 404000, time: "2013-12-20 13:33:31.7", duration: "6m44s", speed: 5.31, heartrate: 89, altitude: 11}
,{lat:51.21196, long:3.219882, color: "#0a0000", elapsed: 406000, time: "2013-12-20 13:33:33.9", duration: "6m46s", speed: 5.12, heartrate: 89, altitude: 11}
,{lat:51.211947, long:3.219905, color: "#000000", elapsed: 409000, time: "2013-12-20 13:33:36.0", duration: "6m49s", speed: 4.94, heartrate: 88, altitude: 11}
,{lat:51.211933, long:3.219935, color: "#000000", elapsed: 411000, time: "2013-12-20 13:33:38.2", duration: "6m51s", speed: 4.81, heartrate: 89, altitude: 11}
,{lat:51.211915, long:3.219965, color: "#000000", elapsed: 413000, time: "2013-12-20 13:33:40.3", duration: "6m53s", speed: 4.66, heartrate: 90, altitude: 10}
,{lat:51.211878, long:3.220023, color: "#000000", elapsed: 415000, time: "2013-12-20 13:33:42.5", duration: "6m55s", speed: 4.71, heartrate: 89, altitude: 10}
,{lat:51.211848, long:3.220078, color: "#040000", elapsed: 417000, time: "2013-12-20 13:33:44.6", duration: "6m57s", speed: 5.05, heartrate: 89, altitude: 9}
,{lat:51.211818, long:3.220143, color: "#2a0000", elapsed: 419000, time: "2013-12-20 13:33:46.8", duration: "6m59s", speed: 5.51, heartrate: 88, altitude: 9}
,{lat:51.211788, long:3.2202, color: "#5c0000", elapsed: 421000, time: "2013-12-20 13:33:48.9", duration: "7m1s", speed: 6.1, heartrate: 88, altitude: 9}
,{lat:51.211762, long:3.22024, color: "#8a0000", elapsed: 424000, time: "2013-12-20 13:33:51.1", duration: "7m4s", speed: 6.64, heartrate: 89, altitude: 9}
,{lat:51.211732, long:3.220278, color: "#ac0000", elapsed: 426000, time: "2013-12-20 13:33:53.2", duration: "7m6s", speed: 7.05, heartrate: 89, altitude: 9}
,{lat:51.211708, long:3.220312, color: "#bb0000", elapsed: 428000, time: "2013-12-20 13:33:55.4", duration: "7m8s", speed: 7.23, heartrate: 91, altitude: 9}
,{lat:51.211673, long:3.220362, color: "#cf0000", elapsed: 430000, time: "2013-12-20 13:33:57.5", duration: "7m10s", speed: 7.46, heartrate: 91, altitude: 9}
,{lat:51.211657, long:3.220405, color: "#d30000", elapsed: 432000, time: "2013-12-20 13:33:59.7", duration: "7m12s", speed: 7.51, heartrate: 91, altitude: 9}
,{lat:51.211628, long:3.220438, color: "#c10000", elapsed: 434000, time: "2013-12-20 13:34:01.9", duration: "7m14s", speed: 7.3, heartrate: 90, altitude: 9}
,{lat:51.211605, long:3.220463, color: "#af0000", elapsed: 437000, time: "2013-12-20 13:34:04.0", duration: "7m17s", speed: 7.09, heartrate: 89, altitude: 9}
,{lat:51.211592, long:3.22049, color: "#980000", elapsed: 439000, time: "2013-12-20 13:34:06.2", duration: "7m19s", speed: 6.81, heartrate: 89, altitude: 9}
,{lat:51.211587, long:3.220547, color: "#810000", elapsed: 441000, time: "2013-12-20 13:34:08.3", duration: "7m21s", speed: 6.54, heartrate: 90, altitude: 9}
,{lat:51.211578, long:3.220587, color: "#6a0000", elapsed: 443000, time: "2013-12-20 13:34:10.7", duration: "7m23s", speed: 6.27, heartrate: 90, altitude: 9}
,{lat:51.211558, long:3.220625, color: "#540000", elapsed: 445000, time: "2013-12-20 13:34:12.8", duration: "7m25s", speed: 6, heartrate: 91, altitude: 9}
,{lat:51.211538, long:3.220647, color: "#400000", elapsed: 448000, time: "2013-12-20 13:34:15.0", duration: "7m28s", speed: 5.77, heartrate: 92, altitude: 9}
,{lat:51.21152, long:3.220673, color: "#300000", elapsed: 450000, time: "2013-12-20 13:34:17.3", duration: "7m30s", speed: 5.58, heartrate: 92, altitude: 9}
,{lat:51.211495, long:3.220712, color: "#2a0000", elapsed: 452000, time: "2013-12-20 13:34:19.5", duration: "7m32s", speed: 5.51, heartrate: 92, altitude: 9}
,{lat:51.211482, long:3.220742, color: "#160000", elapsed: 454000, time: "2013-12-20 13:34:21.7", duration: "7m34s", speed: 5.27, heartrate: 92, altitude: 8}
,{lat:51.211465, long:3.22077, color: "#0a0000", elapsed: 456000, time: "2013-12-20 13:34:23.9", duration: "7m36s", speed: 5.12, heartrate: 92, altitude: 7}
,{lat:51.211445, long:3.220793, color: "#000000", elapsed: 459000, time: "2013-12-20 13:34:26.1", duration: "7m39s", speed: 5, heartrate: 91, altitude: 7}
,{lat:51.21142, long:3.220812, color: "#000000", elapsed: 461000, time: "2013-12-20 13:34:28.3", duration: "7m41s", speed: 4.99, heartrate: 91, altitude: 6}
,{lat:51.211398, long:3.220853, color: "#030000", elapsed: 463000, time: "2013-12-20 13:34:30.5", duration: "7m43s", speed: 5.04, heartrate: 91, altitude: 5}
,{lat:51.211378, long:3.220878, color: "#000000", elapsed: 465000, time: "2013-12-20 13:34:32.7", duration: "7m45s", speed: 4.9, heartrate: 91, altitude: 3}
,{lat:51.211357, long:3.220908, color: "#000000", elapsed: 467000, time: "2013-12-20 13:34:34.9", duration: "7m47s", speed: 4.92, heartrate: 92, altitude: 2}
,{lat:51.211332, long:3.220948, color: "#010000", elapsed: 470000, time: "2013-12-20 13:34:37.1", duration: "7m50s", speed: 5.02, heartrate: 92, altitude: 2}
,{lat:51.211305, long:3.220972, color: "#0f0000", elapsed: 472000, time: "2013-12-20 13:34:39.3", duration: "7m52s", speed: 5.18, heartrate: 93, altitude: 2}
,{lat:51.21128, long:3.220997, color: "#160000", elapsed: 474000, time: "2013-12-20 13:34:41.5", duration: "7m54s", speed: 5.27, heartrate: 93, altitude: 2}
,{lat:51.211263, long:3.221015, color: "#100000", elapsed: 476000, time: "2013-12-20 13:34:43.7", duration: "7m56s", speed: 5.2, heartrate: 93, altitude: 2}
,{lat:51.21125, long:3.22102, color: "#000000", elapsed: 478000, time: "2013-12-20 13:34:45.9", duration: "7m58s", speed: 4.98, heartrate: 93, altitude: 2}
,{lat:51.211232, long:3.221017, color: "#000000", elapsed: 481000, time: "2013-12-20 13:34:48.1", duration: "8m1s", speed: 4.83, heartrate: 94, altitude: 2}
,{lat:51.211208, long:3.221018, color: "#000000", elapsed: 483000, time: "2013-12-20 13:34:50.3", duration: "8m3s", speed: 4.59, heartrate: 94, altitude: 2}
,{lat:51.211185, long:3.220988, color: "#000000", elapsed: 485000, time: "2013-12-20 13:34:52.5", duration: "8m5s", speed: 4.51, heartrate: 94, altitude: 2}
,{lat:51.211167, long:3.220963, color: "#000000", elapsed: 487000, time: "2013-12-20 13:34:54.7", duration: "8m7s", speed: 4.27, heartrate: 94, altitude: 2}
,{lat:51.211138, long:3.220942, color: "#000000", elapsed: 489000, time: "2013-12-20 13:34:56.9", duration: "8m9s", speed: 4.25, heartrate: 94, altitude: 2}
,{lat:51.21111, long:3.220903, color: "#000000", elapsed: 492000, time: "2013-12-20 13:34:59.1", duration: "8m12s", speed: 4.43, heartrate: 94, altitude: 3}
,{lat:51.211088, long:3.220872, color: "#000000", elapsed: 494000, time: "2013-12-20 13:35:01.3", duration: "8m14s", speed: 4.69, heartrate: 95, altitude: 5}
,{lat:51.211065, long:3.220835, color: "#000000", elapsed: 496000, time: "2013-12-20 13:35:03.5", duration: "8m16s", speed: 4.98, heartrate: 96, altitude: 7}
,{lat:51.20921, long:3.222715, color: "#180000", elapsed: 498000, time: "2013-12-20 13:35:05.7", duration: "8m18s", speed: 5.29, heartrate: 96, altitude: 9}
,{lat:51.209202, long:3.222768, color: "#1d0000", elapsed: 501000, time: "2013-12-20 13:35:08.0", duration: "8m21s", speed: 5.35, heartrate: 96, altitude: 9}
,{lat:51.209192, long:3.222818, color: "#250000", elapsed: 503000, time: "2013-12-20 13:35:10.2", duration: "8m23s", speed: 5.45, heartrate: 95, altitude: 9}
,{lat:51.209165, long:3.222883, color: "#430000", elapsed: 505000, time: "2013-12-20 13:35:12.4", duration: "8m25s", speed: 5.8, heartrate: 95, altitude: 9}
,{lat:51.209145, long:3.222932, color: "#540000", elapsed: 507000, time: "2013-12-20 13:35:14.6", duration: "8m27s", speed: 6, heartrate: 94, altitude: 9}
,{lat:51.209122, long:3.222992, color: "#6a0000", elapsed: 509000, time: "2013-12-20 13:35:16.8", duration: "8m29s", speed: 6.27, heartrate: 93, altitude: 9}
,{lat:51.209095, long:3.223053, color: "#860000", elapsed: 512000, time: "2013-12-20 13:35:19.0", duration: "8m32s", speed: 6.6, heartrate: 93, altitude: 9}
,{lat:51.20908, long:3.223105, color: "#9e0000", elapsed: 514000, time: "2013-12-20 13:35:21.2", duration: "8m34s", speed: 6.88, heartrate: 93, altitude: 9}
,{lat:51.20907, long:3.223175, color: "#b20000", elapsed: 516000, time: "2013-12-20 13:35:23.4", duration: "8m36s", speed: 7.12, heartrate: 93, altitude: 9}
,{lat:51.209072, long:3.223218, color: "#b10000", elapsed: 518000, time: "2013-12-20 13:35:25.6", duration: "8m38s", speed: 7.11, heartrate: 93, altitude: 9}
,{lat:51.209072, long:3.223252, color: "#aa0000", elapsed: 520000, time: "2013-12-20 13:35:27.8", duration: "8m40s", speed: 7.03, heartrate: 92, altitude: 10}
,{lat:51.209065, long:3.223285, color: "#910000", elapsed: 523000, time: "2013-12-20 13:35:30.0", duration: "8m43s", speed: 6.73, heartrate: 91, altitude: 11}
,{lat:51.209055, long:3.223315, color: "#6f0000", elapsed: 525000, time: "2013-12-20 13:35:32.2", duration: "8m45s", speed: 6.32, heartrate: 91, altitude: 11}
,{lat:51.209053, long:3.22336, color: "#4c0000", elapsed: 527000, time: "2013-12-20 13:35:34.4", duration: "8m47s", speed: 5.91, heartrate: 92, altitude: 11}
,{lat:51.209057, long:3.223395, color: "#230000", elapsed: 529000, time: "2013-12-20 13:35:36.6", duration: "8m49s", speed: 5.42, heartrate: 91, altitude: 11}
,{lat:51.209053, long:3.223428, color: "#060000", elapsed: 531000, time: "2013-12-20 13:35:38.8", duration: "8m51s", speed: 5.08, heartrate: 91, altitude: 11}
,{lat:51.209043, long:3.223475, color: "#000000", elapsed: 534000, time: "2013-12-20 13:35:41.0", duration: "8m54s", speed: 4.9, heartrate: 90, altitude: 11}
,{lat:51.209035, long:3.223527, color: "#000000", elapsed: 536000, time: "2013-12-20 13:35:43.2", duration: "8m56s", speed: 4.89, heartrate: 90, altitude: 11}
,{lat:51.209013, long:3.223593, color: "#060000", elapsed: 538000, time: "2013-12-20 13:35:45.4", duration: "8m58s", speed: 5.08, heartrate: 90, altitude: 11}
,{lat:51.208998, long:3.223625, color: "#0f0000", elapsed: 540000, time: "2013-12-20 13:35:47.6", duration: "9m0s", speed: 5.18, heartrate: 88, altitude: 10}
,{lat:51.208982, long:3.223652, color: "#1a0000", elapsed: 542000, time: "2013-12-20 13:35:49.8", duration: "9m2s", speed: 5.31, heartrate: 88, altitude: 10}
,{lat:51.208962, long:3.223693, color: "#280000", elapsed: 545000, time: "2013-12-20 13:35:52.0", duration: "9m5s", speed: 5.48, heartrate: 87, altitude: 9}
,{lat:51.208935, long:3.223732, color: "#350000", elapsed: 547000, time: "2013-12-20 13:35:54.2", duration: "9m7s", speed: 5.63, heartrate: 88, altitude: 9}
,{lat:51.208903, long:3.223783, color: "#420000", elapsed: 549000, time: "2013-12-20 13:35:56.4", duration: "9m9s", speed: 5.79, heartrate: 89, altitude: 9}
,{lat:51.208875, long:3.223817, color: "#450000", elapsed: 551000, time: "2013-12-20 13:35:58.6", duration: "9m11s", speed: 5.82, heartrate: 91, altitude: 9}
,{lat:51.208852, long:3.223842, color: "#4f0000", elapsed: 553000, time: "2013-12-20 13:36:00.8", duration: "9m13s", speed: 5.94, heartrate: 91, altitude: 8}
,{lat:51.208823, long:3.22386, color: "#590000", elapsed: 556000, time: "2013-12-20 13:36:03.0", duration: "9m16s", speed: 6.06, heartrate: 91, altitude: 8}
,{lat:51.208797, long:3.22389, color: "#5f0000", elapsed: 558000, time: "2013-12-20 13:36:05.2", duration: "9m18s", speed: 6.14, heartrate: 91, altitude: 7}
,{lat:51.208758, long:3.223925, color: "#660000", elapsed: 560000, time: "2013-12-20 13:36:07.4", duration: "9m20s", speed: 6.22, heartrate: 91, altitude: 6}
,{lat:51.208733, long:3.223952, color: "#5f0000", elapsed: 562000, time: "2013-12-20 13:36:09.6", duration: "9m22s", speed: 6.13, heartrate: 92, altitude: 6}
,{lat:51.20871, long:3.223983, color: "#5d0000", elapsed: 564000, time: "2013-12-20 13:36:11.8", duration: "9m24s", speed: 6.11, heartrate: 92, altitude: 5}
,{lat:51.208685, long:3.224015, color: "#5f0000", elapsed: 567000, time: "2013-12-20 13:36:14.0", duration: "9m27s", speed: 6.13, heartrate: 91, altitude: 5}
,{lat:51.20865, long:3.224055, color: "#660000", elapsed: 569000, time: "2013-12-20 13:36:16.2", duration: "9m29s", speed: 6.22, heartrate: 90, altitude: 5}
,{lat:51.208602, long:3.224128, color: "#800000", elapsed: 571000, time: "2013-12-20 13:36:18.4", duration: "9m31s", speed: 6.53, heartrate: 88, altitude: 5}
,{lat:51.208572, long:3.224182, color: "#940000", elapsed: 573000, time: "2013-12-20 13:36:20.6", duration: "9m33s", speed: 6.77, heartrate: 87, altitude: 5}
,{lat:51.208543, long:3.22423, color: "#b20000", elapsed: 575000, time: "2013-12-20 13:36:22.8", duration: "9m35s", speed: 7.12, heartrate: 88, altitude: 5}
,{lat:51.20851, long:3.224278, color: "#d20000", elapsed: 578000, time: "2013-12-20 13:36:25.0", duration: "9m38s", speed: 7.5, heartrate: 88, altitude: 5}
,{lat:51.208482, long:3.224318, color: "#ec0000", elapsed: 580000, time: "2013-12-20 13:36:27.2", duration: "9m40s", speed: 7.81, heartrate: 89, altitude: 5}
,{lat:51.208435, long:3.224357, color: "#fe0000", elapsed: 582000, time: "2013-12-20 13:36:29.4", duration: "9m42s", speed: 8.03, heartrate: 89, altitude: 5}
,{lat:51.208418, long:3.224382, color: "#f20000", elapsed: 584000, time: "2013-12-20 13:36:31.6", duration: "9m44s", speed: 7.88, heartrate: 88, altitude: 5}
,{lat:51.208407, long:3.224412, color: "#e90000", elapsed: 586000, time: "2013-12-20 13:36:33.8", duration: "9m46s", speed: 7.78, heartrate: 88, altitude: 5}
,{lat:51.208397, long:3.224435, color: "#ca0000", elapsed: 589000, time: "2013-12-20 13:36:36.0", duration: "9m49s", speed: 7.41, heartrate: 88, altitude: 5}
,{lat:51.208377, long:3.224452, color: "#a40000", elapsed: 591000, time: "2013-12-20 13:36:38.2", duration: "9m51s", speed: 6.96, heartrate: 89, altitude: 5}
,{lat:51.208345, long:3.224468, color: "#830000", elapsed: 593000, time: "2013-12-20 13:36:40.4", duration: "9m53s", speed: 6.56, heartrate: 89, altitude: 5}
,{lat:51.208325, long:3.224473, color: "#520000", elapsed: 595000, time: "2013-12-20 13:36:42.6", duration: "9m55s", speed: 5.98, heartrate: 89, altitude: 4}
,{lat:51.208303, long:3.224475, color: "#260000", elapsed: 597000, time: "2013-12-20 13:36:44.8", duration: "9m57s", speed: 5.46, heartrate: 88, altitude: 3}
,{lat:51.208278, long:3.224477, color: "#0b0000", elapsed: 600000, time: "2013-12-20 13:36:47.0", duration: "10m0s", speed: 5.14, heartrate: 89, altitude: 2}
,{lat:51.208242, long:3.224488, color: "#050000", elapsed: 602000, time: "2013-12-20 13:36:49.2", duration: "10m2s", speed: 5.06, heartrate: 90, altitude: 0}
,{lat:51.208207, long:3.224507, color: "#090000", elapsed: 604000, time: "2013-12-20 13:36:51.4", duration: "10m4s", speed: 5.11, heartrate: 90, altitude: 0}
,{lat:51.208178, long:3.224522, color: "#090000", elapsed: 606000, time: "2013-12-20 13:36:53.6", duration: "10m6s", speed: 5.11, heartrate: 89, altitude: 0}
,{lat:51.208147, long:3.22454, color: "#100000", elapsed: 608000, time: "2013-12-20 13:36:55.8", duration: "10m8s", speed: 5.2, heartrate: 89, altitude: 0}
,{lat:51.208123, long:3.224558, color: "#1e0000", elapsed: 611000, time: "2013-12-20 13:36:58.0", duration: "10m11s", speed: 5.36, heartrate: 90, altitude: 0}
,{lat:51.208087, long:3.224558, color: "#2e0000", elapsed: 613000, time: "2013-12-20 13:37:00.2", duration: "10m13s", speed: 5.55, heartrate: 91, altitude: 0}
,{lat:51.208053, long:3.224592, color: "#410000", elapsed: 615000, time: "2013-12-20 13:37:02.4", duration: "10m15s", speed: 5.78, heartrate: 93, altitude: 0}
,{lat:51.208033, long:3.224613, color: "#390000", elapsed: 617000, time: "2013-12-20 13:37:04.6", duration: "10m17s", speed: 5.68, heartrate: 95, altitude: 0}
,{lat:51.208008, long:3.224628, color: "#3b0000", elapsed: 619000, time: "2013-12-20 13:37:06.8", duration: "10m19s", speed: 5.71, heartrate: 95, altitude: 0}
,{lat:51.207988, long:3.224638, color: "#370000", elapsed: 622000, time: "2013-12-20 13:37:09.0", duration: "10m22s", speed: 5.66, heartrate: 94, altitude: 0}
,{lat:51.207967, long:3.224652, color: "#2e0000", elapsed: 624000, time: "2013-12-20 13:37:11.2", duration: "10m24s", speed: 5.55, heartrate: 93, altitude: 0}
,{lat:51.20792, long:3.22467, color: "#300000", elapsed: 626000, time: "2013-12-20 13:37:13.4", duration: "10m26s", speed: 5.58, heartrate: 92, altitude: -3}
,{lat:51.207895, long:3.22469, color: "#1f0000", elapsed: 628000, time: "2013-12-20 13:37:15.6", duration: "10m28s", speed: 5.37, heartrate: 91, altitude: -2}
,{lat:51.207875, long:3.224715, color: "#1d0000", elapsed: 630000, time: "2013-12-20 13:37:17.8", duration: "10m30s", speed: 5.35, heartrate: 90, altitude: -4}
,{lat:51.207852, long:3.224745, color: "#1f0000", elapsed: 633000, time: "2013-12-20 13:37:20.0", duration: "10m33s", speed: 5.37, heartrate: 89, altitude: -4}
,{lat:51.207827, long:3.224767, color: "#270000", elapsed: 635000, time: "2013-12-20 13:37:22.2", duration: "10m35s", speed: 5.47, heartrate: 89, altitude: -4}
,{lat:51.207785, long:3.224818, color: "#3b0000", elapsed: 637000, time: "2013-12-20 13:37:24.4", duration: "10m37s", speed: 5.71, heartrate: 90, altitude: -4}
,{lat:51.207752, long:3.224828, color: "#400000", elapsed: 639000, time: "2013-12-20 13:37:26.6", duration: "10m39s", speed: 5.77, heartrate: 90, altitude: -4}
,{lat:51.207733, long:3.22485, color: "#480000", elapsed: 641000, time: "2013-12-20 13:37:28.8", duration: "10m41s", speed: 5.86, heartrate: 90, altitude: -4}
,{lat:51.20772, long:3.224878, color: "#490000", elapsed: 644000, time: "2013-12-20 13:37:31.0", duration: "10m44s", speed: 5.87, heartrate: 89, altitude: -4}
,{lat:51.207703, long:3.22491, color: "#470000", elapsed: 646000, time: "2013-12-20 13:37:33.2", duration: "10m46s", speed: 5.85, heartrate: 89, altitude: -6}
,{lat:51.20768, long:3.224965, color: "#450000", elapsed: 648000, time: "2013-12-20 13:37:35.4", duration: "10m48s", speed: 5.83, heartrate: 90, altitude: -7}
,{lat:51.207662, long:3.224985, color: "#320000", elapsed: 650000, time: "2013-12-20 13:37:37.6", duration: "10m50s", speed: 5.6, heartrate: 91, altitude: -8}
,{lat:51.207647, long:3.225023, color: "#240000", elapsed: 652000, time: "2013-12-20 13:37:39.8", duration: "10m52s", speed: 5.43, heartrate: 91, altitude: -9}
,{lat:51.207627, long:3.225062, color: "#200000", elapsed: 655000, time: "2013-12-20 13:37:42.0", duration: "10m55s", speed: 5.39, heartrate: 91, altitude: -10}
,{lat:51.207612, long:3.22509, color: "#1f0000", elapsed: 657000, time: "2013-12-20 13:37:44.2", duration: "10m57s", speed: 5.37, heartrate: 91, altitude: -10}
,{lat:51.207577, long:3.225102, color: "#1f0000", elapsed: 659000, time: "2013-12-20 13:37:46.4", duration: "10m59s", speed: 5.37, heartrate: 90, altitude: -10}
,{lat:51.207543, long:3.225088, color: "#1a0000", elapsed: 661000, time: "2013-12-20 13:37:48.6", duration: "11m1s", speed: 5.31, heartrate: 90, altitude: -10}
,{lat:51.20752, long:3.225083, color: "#1f0000", elapsed: 663000, time: "2013-12-20 13:37:50.8", duration: "11m3s", speed: 5.38, heartrate: 90, altitude: -10}
,{lat:51.207495, long:3.225075, color: "#1f0000", elapsed: 666000, time: "2013-12-20 13:37:53.0", duration: "11m6s", speed: 5.37, heartrate: 90, altitude: -10}
,{lat:51.207463, long:3.225063, color: "#1f0000", elapsed: 668000, time: "2013-12-20 13:37:55.2", duration: "11m8s", speed: 5.38, heartrate: 90, altitude: -10}
,{lat:51.207417, long:3.225048, color: "#2f0000", elapsed: 670000, time: "2013-12-20 13:37:57.5", duration: "11m10s", speed: 5.56, heartrate: 90, altitude: -10}
,{lat:51.207382, long:3.22504, color: "#360000", elapsed: 672000, time: "2013-12-20 13:37:59.7", duration: "11m12s", speed: 5.65, heartrate: 90, altitude: -8}
,{lat:51.207352, long:3.225027, color: "#3f0000", elapsed: 674000, time: "2013-12-20 13:38:01.9", duration: "11m14s", speed: 5.75, heartrate: 90, altitude: -7}
,{lat:51.20732, long:3.225017, color: "#4b0000", elapsed: 677000, time: "2013-12-20 13:38:04.1", duration: "11m17s", speed: 5.9, heartrate: 90, altitude: -4}
,{lat:51.207288, long:3.225003, color: "#590000", elapsed: 679000, time: "2013-12-20 13:38:06.3", duration: "11m19s", speed: 6.06, heartrate: 90, altitude: -2}
,{lat:51.20724, long:3.224975, color: "#6a0000", elapsed: 681000, time: "2013-12-20 13:38:08.5", duration: "11m21s", speed: 6.27, heartrate: 90, altitude: 0}
,{lat:51.207215, long:3.224953, color: "#6a0000", elapsed: 683000, time: "2013-12-20 13:38:10.7", duration: "11m23s", speed: 6.27, heartrate: 91, altitude: 0}
,{lat:51.207193, long:3.22494, color: "#690000", elapsed: 685000, time: "2013-12-20 13:38:12.9", duration: "11m25s", speed: 6.25, heartrate: 91, altitude: 0}
,{lat:51.207182, long:3.224915, color: "#640000", elapsed: 688000, time: "2013-12-20 13:38:15.1", duration: "11m28s", speed: 6.2, heartrate: 92, altitude: 0}
,{lat:51.207162, long:3.224897, color: "#560000", elapsed: 690000, time: "2013-12-20 13:38:17.3", duration: "11m30s", speed: 6.03, heartrate: 93, altitude: 1}
,{lat:51.207145, long:3.22489, color: "#410000", elapsed: 692000, time: "2013-12-20 13:38:19.5", duration: "11m32s", speed: 5.78, heartrate: 93, altitude: 2}
,{lat:51.207138, long:3.224887, color: "#000000", elapsed: 694000, time: "2013-12-20 13:38:21.6", duration: "11m34s", speed: 0, heartrate: 93, altitude: 3}
,{lat:51.20713, long:3.224878, color: "#000000", elapsed: 696000, time: "2013-12-20 13:38:23.8", duration: "11m36s", speed: 3.28, heartrate: 93, altitude: 3}
,{lat:51.207108, long:3.22486, color: "#000000", elapsed: 699000, time: "2013-12-20 13:38:26.0", duration: "11m39s", speed: 3.18, heartrate: 93, altitude: 3}
,{lat:51.207097, long:3.224838, color: "#000000", elapsed: 701000, time: "2013-12-20 13:38:28.2", duration: "11m41s", speed: 3.07, heartrate: 92, altitude: 3}
,{lat:51.207093, long:3.224802, color: "#000000", elapsed: 703000, time: "2013-12-20 13:38:30.4", duration: "11m43s", speed: 0, heartrate: 93, altitude: 3}
,{lat:51.207077, long:3.22478, color: "#000000", elapsed: 705000, time: "2013-12-20 13:38:32.6", duration: "11m45s", speed: 3.03, heartrate: 92, altitude: 3}
,{lat:51.20706, long:3.224755, color: "#000000", elapsed: 707000, time: "2013-12-20 13:38:34.8", duration: "11m47s", speed: 3.24, heartrate: 91, altitude: 3}
,{lat:51.207047, long:3.22475, color: "#000000", elapsed: 710000, time: "2013-12-20 13:38:37.0", duration: "11m50s", speed: 3.4, heartrate: 91, altitude: 3}
,{lat:51.207038, long:3.224747, color: "#000000", elapsed: 712000, time: "2013-12-20 13:38:39.2", duration: "11m52s", speed: 0, heartrate: 91, altitude: 3}
,{lat:51.207038, long:3.224747, color: "#000000", elapsed: 714000, time: "2013-12-20 13:38:41.4", duration: "11m54s", speed: 0, heartrate: 92, altitude: 3}
,{lat:51.206992, long:3.22468, color: "#000000", elapsed: 716000, time: "2013-12-20 13:38:43.6", duration: "11m56s", speed: 0, heartrate: 95, altitude: 1}
,{lat:51.206978, long:3.224662, color: "#000000", elapsed: 718000, time: "2013-12-20 13:38:45.8", duration: "11m58s", speed: 0, heartrate: 95, altitude: 0}
,{lat:51.206963, long:3.224648, color: "#000000", elapsed: 721000, time: "2013-12-20 13:38:48.0", duration: "12m1s", speed: 0, heartrate: 93, altitude: 0}
,{lat:51.206943, long:3.224633, color: "#000000", elapsed: 723000, time: "2013-12-20 13:38:50.2", duration: "12m3s", speed: 0, heartrate: 91, altitude: 0}
,{lat:51.206925, long:3.224615, color: "#000000", elapsed: 725000, time: "2013-12-20 13:38:52.4", duration: "12m5s", speed: 0, heartrate: 90, altitude: 0}
,{lat:51.206922, long:3.224597, color: "#000000", elapsed: 727000, time: "2013-12-20 13:38:54.6", duration: "12m7s", speed: 3.79, heartrate: 88, altitude: 0}
,{lat:51.206908, long:3.224563, color: "#000000", elapsed: 729000, time: "2013-12-20 13:38:56.8", duration: "12m9s", speed: 3.68, heartrate: 87, altitude: 0}
,{lat:51.20691, long:3.224517, color: "#000000", elapsed: 732000, time: "2013-12-20 13:38:59.0", duration: "12m12s", speed: 3.74, heartrate: 87, altitude: 0}
,{lat:51.206903, long:3.22447, color: "#000000", elapsed: 734000, time: "2013-12-20 13:39:01.2", duration: "12m14s", speed: 3.88, heartrate: 87, altitude: 0}
,{lat:51.20688, long:3.224422, color: "#000000", elapsed: 736000, time: "2013-12-20 13:39:03.4", duration: "12m16s", speed: 4.16, heartrate: 87, altitude: 0}
,{lat:51.206868, long:3.224395, color: "#000000", elapsed: 738000, time: "2013-12-20 13:39:05.6", duration: "12m18s", speed: 4.23, heartrate: 88, altitude: 0}
,{lat:51.20686, long:3.224378, color: "#000000", elapsed: 740000, time: "2013-12-20 13:39:07.8", duration: "12m20s", speed: 0, heartrate: 89, altitude: 0}
,{lat:51.20686, long:3.224378, color: "#000000", elapsed: 743000, time: "2013-12-20 13:39:10.0", duration: "12m23s", speed: 0, heartrate: 89, altitude: 0}
);
waypointsList = Array (
{lat:51.215815, long:3.214917, lap:0, infos: "<h3 style=\"padding:0; margin:0\">Lap 1</h3><b>Distance:</b> 0.341 km<br/><b>Time:</b> 2m41s<br/><b>Average speed:</b> 7.62 km/h<br/><b>Maximum speed:</b> 7.93 km/h<br/><b>Average heartrate:</b> 94 bpm<br/><b>Maximum heartrate:</b> 105 bpm<br/>"}
,{lat:51.211558, long:3.220625, lap:1, infos: "<h3 style=\"padding:0; margin:0\">Lap 2</h3><b>Distance:</b> 0.63 km<br/><b>Time:</b> 4m48s<br/><b>Average speed:</b> 7.51 km/h<br/><b>Maximum speed:</b> 7.51 km/h<br/><b>Average heartrate:</b> 91 bpm<br/><b>Maximum heartrate:</b> 96 bpm<br/>"}
,{lat:51.20686, long:3.224378, lap:2, infos: "<h3 style=\"padding:0; margin:0\">Lap 3</h3><b>Distance:</b> 0.661 km<br/><b>Time:</b> 4m54s<br/><b>Average speed:</b> 8.03 km/h<br/><b>Maximum speed:</b> 8.03 km/h<br/><b>Average heartrate:</b> 91 bpm<br/><b>Maximum heartrate:</b> 96 bpm<br/>"});

var graph;
function loadMap() 
{
	var centerLatLng = new google.maps.LatLng(pointsList[0].lat, pointsList[0].long);
	var myOptions = {
	      zoom: 14,
	      center: centerLatLng,
	      scaleControl: true,
	      mapTypeId: google.maps.MapTypeId.HYBRID
	};

	map = new google.maps.Map(document.getElementById("map"), myOptions);
   highlightedPoint = new google.maps.Marker({position: centerLatLng, map: map, zIndex: 1});
	var image_size = new google.maps.Size(32, 32);
	var image_origin = new google.maps.Point(0, 0);
	var image_anchor = new google.maps.Point(3, 25);
	for (i=0; i<waypointsList.length; i++)
	{
	    var dataLapPoint = waypointsList[i];
		var point = new google.maps.LatLng(dataLapPoint.lat, dataLapPoint.long);
		var markerImage = new google.maps.MarkerImage("http://www.icone-gif.com/icone/isometrique/32x32/green-flag.png", image_size, image_origin, image_anchor);
		var markerOptions = {
			icon: markerImage,
			position: point}
		var markerD = new google.maps.Marker(markerOptions); 
		markerD.setMap(map);
		attachLapPopupHandler(markerD, dataLapPoint);
	}

	for (i=0; i<pointsList.length; i++)
	{
		if(i > 0)
		{
			var previousDataPoint = pointsList[i-1];
			var currentDataPoint = pointsList[i];
			var startPoint = new google.maps.LatLng(previousDataPoint.lat, previousDataPoint.long);
			var endPoint = new google.maps.LatLng(currentDataPoint.lat, currentDataPoint.long);
			var pathArray = Array(startPoint, endPoint);
			var polyline = new google.maps.Polyline({path: pathArray,
					strokeColor: currentDataPoint.color,
					strokeOpacity: 0.9,
					strokeWeight: 5,
					});
			polyline.setMap(map);
			attachPopupHandler(polyline, currentDataPoint);
		        attachMouseOverHandler(polyline, i);
		}
	}
}
function attachLapPopupHandler(mapElement, dataLapPoint) {
     google.maps.event.addListener(mapElement, 'click', function(evt) {lap_popup_callback(evt,dataLapPoint);});
}
function attachPopupHandler(mapElement, dataPoint) {
     google.maps.event.addListener(mapElement, 'click', function(evt) {point_popup_callback(evt,dataPoint);});
}
function attachMouseOverHandler(mapElement, point) {
     google.maps.event.addListener(mapElement, 'mouseover', function() {graph.setSelection(point);});
}
//]]>
</script>
<script type="text/javascript" src="http://dygraphs.com/1.0.1/dygraph-combined.js"></script>
<script type="text/javascript">
// point ID, elapsed time (ms), speed (km/h), heartrate (bpm), elevation (m)
laps = [73,207,342,]
displayData = [true, true, true]
labelsData = ["Speed", "Heart Rate", "Altitude"]
function durationToString(pt,multiline) {
	 ms = pointsList[pt].elapsed;
	 var h = Math.floor(ms / (61 * 60 * 1000));
	 ms = ms - h * (60 * 60 * 1000);
	 var m = Math.floor(ms / (60 * 1000));
	 ms = ms - m * (60 * 1000);
	 var s = Math.floor(ms / 1000);
	 ms = ms - (s * 1000);
	 ths = Math.floor(ms / 10);
	 var r = "";
	 if(h!==0) {r = r + h +"h"; if(multiline) {r = r +"<br/>"}}
	 r = r + m + "mn"; if(multiline) {r = r +"<br/>"}
	 r = r + s + "." + ths +"s";
	 return r;
}
function loadGraph() 
{
	graphDatas=[];
	labels=[];
	for(var i = 0; i < pointsList.length; i++)
	{
		var col = 0;
		graphDatas[i] = [];
		labels[col] = "Point ID";
		graphDatas[i][col++] = i;
		labels[col] = "Laps";
		graphDatas[i][col++] = null;
		if(displayData[0]) { //speed
		    labels[col] = labelsData[0];
		    graphDatas[i][col++] = pointsList[i].speed;
	        }
		if(displayData[1]) { //heartrate
		    labels[col] = labelsData[1];
		    graphDatas[i][col++] = pointsList[i].heartrate;
	        }
		if(displayData[2]) { //altitude
		    labels[col] = labelsData[2];
		    graphDatas[i][col++] = pointsList[i].altitude;
	        }
	}
	graph = new Dygraph(
	document.getElementById("graph")
	,graphDatas
	,{
	labels: labels,
	"Speed": { axis: {includeZero:true}},
   colors: ["#000000", "#0000FF", "#00AA00", "#FF0000"],
	axes: { 
	x: {
	 valueFormatter: function(ms) {return durationToString(ms,false);}
	 ,axisLabelFormatter: function(ms) {return durationToString(ms,true);}
	}
	}
	,ylabel: 'Heart rate (bpm) / Altitude (m)'
	,y2label: 'Speed (km/h)'
	}
	);
	graph.updateOptions({clickCallback : function(e, x, points) { if(popupGlobal) popupGlobal.close(); e.latLng = new google.maps.LatLng(pointsList[x].lat, pointsList[x].long); popupGlobal = point_popup_callback(e,pointsList[x]); } });
	graph.updateOptions({highlightCallback : function(e, x, points) { center = new google.maps.LatLng(pointsList[x].lat, pointsList[x].long); map.setCenter(center); highlightedPoint.setPosition(center); } });
	graph.updateOptions({annotationClickHandler : function(ann, pt, dg, e) { if(popupGlobal) popupGlobal.close(); e.latLng = new google.maps.LatLng(pointsList[ann.xval].lat, pointsList[ann.xval].long); popupGlobal = lap_popup_callback(e,waypointsList[ann.shortText-1]); } });
	graph.updateOptions({underlayCallback: function(canvas, area, g) {
			for(var i = 0; i+1 < laps.length; i+=2)
			{
              var left = graph.toDomCoords(laps[i], 0)[0];
              var right = graph.toDomCoords(laps[i+1], 0)[0];
              canvas.fillStyle = "rgba(220, 220, 220, 1.0)";
              canvas.fillRect(left, area.y, right - left, area.h);
			}
		}});
	annotations = [];
	for(var i = 0; i < laps.length; ++i)
	{
		annotations.push({
			series: 'Laps',
			xval: laps[i],
			attachAtBottom: true,
			shortText: (i+1),
			text: 'Lap ' + (i+1)
		});
	}
	graph.setAnnotations(annotations);
}
function toggleDisplay(i)
{
	displayData[i] = !displayData[i];
	loadGraph();
}
function load()
{
	loadGraph();
	loadMap();
}
</script>
</head>
<body onload="load()" style="cursor:crosshair" border="0">
<div id="map" style="width: 100%; height: 500px; top: 0px; left: 0px"></div>
<div id="graph" style="width: 100%; height: 300px; top: 0px; left: 0px"></div>
<div id="spacer" style="height: 25px"></div>
<div id="controls" style="width: 100%; text-align:center"><input type="checkbox" name="Speed" onchange="toggleDisplay(0)" checked="checked">Speed</input><input type="checkbox" name="Heartrate" onchange="toggleDisplay(1)" checked="checked">Heartrate</input><input type="checkbox" name="Elevation" onchange="toggleDisplay(2)" checked="checked">Elevation</input></div>
</body>
</html>
